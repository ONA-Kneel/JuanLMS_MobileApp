{"version":3,"names":["Platform","pushNonRingingCallData$","getExpoNotificationsLib","getNotifeeLibThrowIfNotInstalledForPush","getPushNotificationIosLib","getLogger","setPushLogoutCallback","StreamVideoRN","lastApnToken","token","userId","processNonRingingNotificationStreamPayload","streamPayload","sender","type","cid","call_cid","logger","next","undefined","oniOSExpoNotificationEvent","event","pushConfig","getConfig","push","trigger","request","payload","stream","JSON","stringify","oniOSNotifeeEvent","OS","detail","notifeeLib","EventType","PRESS","notification","data","result","onTapNonRingingCallNotification","onPushNotificationiOSStreamVideoEvent","pushNotificationIosLib","getData","isClicked","userInteraction","finish","FetchResult","NoData","initIosNonVoipToken","client","setUnsubscribeListener","ios","pushProviderName","setDeviceToken","streamClient","_user","id","removeDevice","err","push_provider_name","addDevice","then","catch","isExpo","expoNotificationsLib","getDevicePushTokenAsync","devicePushToken","subscription","addPushTokenListener","remove","addEventListener","removeEventListener"],"sourceRoot":"../../../../src","sources":["utils/push/ios.ts"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,cAAc;AAEvC,SAASC,uBAAuB,QAAQ,uBAAuB;AAC/D,SAEEC,uBAAuB,EACvBC,uCAAuC,EACvCC,yBAAyB,QAEpB,QAAQ;AACf,SAASC,SAAS,QAA2B,yBAAyB;AACtE,SAASC,qBAAqB,QAAQ,gCAAgC;AAEtE,SAASC,aAAa,QAAQ,kBAAkB;AAKhD,IAAIC,YAAY,GAAG;EAAEC,KAAK,EAAE,EAAE;EAAEC,MAAM,EAAE;AAAG,CAAC;AAE5C,SAASC,0CAA0CA,CACjDC,aAAgC,EAChC;EACA,IACEA,aAAa,EAAEC,MAAM,KAAK,cAAc,IACxCD,aAAa,EAAEE,IAAI,KAAK,WAAW,EACnC;IACA,MAAMC,GAAG,GAAGH,aAAa,CAACI,QAAQ;IAClC,MAAMF,IAAI,GAAGF,aAAa,CAACE,IAAI;IAC/B,MAAMG,MAAM,GAAGZ,SAAS,CAAC,CAAC,4CAA4C,CAAC,CAAC;IACxEY,MAAM,CAAC,OAAO,EAAE,eAAeF,GAAG,KAAKD,IAAI,EAAE,CAAC;IAC9Cb,uBAAuB,CAACiB,IAAI,CAAC;MAAEH,GAAG;MAAED;IAAK,CAAC,CAAC;IAC3C,OAAO;MAAEC,GAAG;MAAED;IAAK,CAAC;EACtB;EACA,OAAOK,SAAS;AAClB;AAEA,OAAO,MAAMC,0BAA0B,GAAIC,KAAuB,IAAK;EACrE,MAAMC,UAAU,GAAGf,aAAa,CAACgB,SAAS,CAAC,CAAC,CAACC,IAAI;EACjD,IAAIF,UAAU,EAAE;IACd,MAAMG,OAAO,GAAGJ,KAAK,CAACK,OAAO,CAACD,OAAO;IACrC,IACEA,OAAO,IACP,OAAOA,OAAO,KAAK,QAAQ,IAC3B,MAAM,IAAIA,OAAO,IACjBA,OAAO,CAACX,IAAI,KAAK,MAAM,IACvBW,OAAO,CAACE,OAAO,EAAEC,MAAM,EACvB;MACA,MAAMhB,aAAa,GAAGa,OAAO,CAACE,OAAO,CAACC,MAA2B;MACjE,MAAMX,MAAM,GAAGZ,SAAS,CAAC,CAAC,4CAA4C,CAAC,CAAC;MACxEY,MAAM,CACJ,OAAO,EACP,gDAAgDY,IAAI,CAACC,SAAS,CAC5DlB,aACF,CAAC,EACH,CAAC;MACDD,0CAA0C,CAACC,aAAa,CAAC;IAC3D;EACF;AACF,CAAC;AAED,OAAO,MAAMmB,iBAAiB,GAAGA,CAAC;EAChCV;AAIF,CAAC,KAAK;EACJ,IAAIrB,QAAQ,CAACgC,EAAE,KAAK,KAAK,EAAE;EAC3B,MAAMV,UAAU,GAAGf,aAAa,CAACgB,SAAS,CAAC,CAAC,CAACC,IAAI;EACjD,MAAM;IAAEV,IAAI;IAAEmB;EAAO,CAAC,GAAGZ,KAAK;EAC9B,MAAMa,UAAU,GAAG/B,uCAAuC,CAAC,CAAC;EAC5D,IAAImB,UAAU,IAAIR,IAAI,KAAKoB,UAAU,CAACC,SAAS,CAACC,KAAK,EAAE;IACrD,MAAMxB,aAAa,GAAGqB,MAAM,CAACI,YAAY,EAAEC,IAAI,EAAEV,MAEpC;IACb,MAAMW,MAAM,GAAG5B,0CAA0C,CAACC,aAAa,CAAC;IACxE,IAAI2B,MAAM,EAAE;MACV,MAAMtB,MAAM,GAAGZ,SAAS,CAAC,CAAC,mBAAmB,CAAC,CAAC;MAC/CY,MAAM,CACJ,OAAO,EACP,qCAAqCsB,MAAM,CAACxB,GAAG,KAAKwB,MAAM,CAACzB,IAAI,GACjE,CAAC;MACDQ,UAAU,CAACkB,+BAA+B,GAAGD,MAAM,CAACxB,GAAG,EAAEwB,MAAM,CAACzB,IAAI,CAAC;IACvE;EACF;AACF,CAAC;AAED,OAAO,SAAS2B,qCAAqCA,CACnDJ,YAAqC,EACrC;EACA,MAAMK,sBAAsB,GAAGtC,yBAAyB,CAAC,CAAC;EAC1D,MAAMkC,IAAI,GAAGD,YAAY,CAACM,OAAO,CAAC,CAAC;EACnC,MAAM/B,aAAa,GAAG0B,IAAI,EAAEV,MAA2B;EACvD,MAAMX,MAAM,GAAGZ,SAAS,CAAC,CAAC,uCAAuC,CAAC,CAAC;EACnE,IAAI,CAACO,aAAa,EAAE;IAClBK,MAAM,CACJ,OAAO,EACP,oEAAoEY,IAAI,CAACC,SAAS,CAChFQ,IACF,CAAC,EACH,CAAC;IACD;EACF;EACA,MAAMM,SAAS,GAAGN,IAAI,CAACO,eAAe,KAAK,CAAC;EAC5C,MAAMvB,UAAU,GAAGf,aAAa,CAACgB,SAAS,CAAC,CAAC,CAACC,IAAI;EACjD,IAAI,CAACoB,SAAS,IAAI,CAACtB,UAAU,EAAE;IAC7BL,MAAM,CACJ,OAAO,EACP,yDAAyD2B,SAAS,iBAAiB,CAAC,CAACtB,UAAU,EACjG,CAAC;IACDe,YAAY,CAACS,MAAM,CAACJ,sBAAsB,CAACK,WAAW,CAACC,MAAM,CAAC;IAC9D;EACF;EACA;EACA,MAAMT,MAAM,GAAG5B,0CAA0C,CAACC,aAAa,CAAC;EACxE,IAAI2B,MAAM,EAAE;IACVtB,MAAM,CACJ,OAAO,EACP,qCAAqCsB,MAAM,CAACxB,GAAG,KAAKwB,MAAM,CAACzB,IAAI,GACjE,CAAC;IACDQ,UAAU,CAACkB,+BAA+B,GAAGD,MAAM,CAACxB,GAAG,EAAEwB,MAAM,CAACzB,IAAI,CAAC;EACvE;EACAuB,YAAY,CAACS,MAAM,CAACJ,sBAAsB,CAACK,WAAW,CAACC,MAAM,CAAC;AAChE;;AAEA;AACA,OAAO,eAAeC,mBAAmBA,CACvCC,MAAyB,EACzB5B,UAAsB,EACtB6B,sBAAyD,EACzD;EACA,IACEnD,QAAQ,CAACgC,EAAE,KAAK,KAAK,IACrB,CAACV,UAAU,CAAC8B,GAAG,CAACC,gBAAgB,IAChC,CAAC/B,UAAU,CAACkB,+BAA+B,EAC3C;IACA;EACF;EAEA,MAAMvB,MAAM,GAAGZ,SAAS,CAAC,CAAC,qBAAqB,CAAC,CAAC;EACjD,MAAMiD,cAAc,GAAG,MAAO7C,KAAa,IAAK;IAC9C,MAAMC,MAAM,GAAGwC,MAAM,CAACK,YAAY,CAACC,KAAK,EAAEC,EAAE,IAAI,EAAE;IAClD,IAAIjD,YAAY,CAACC,KAAK,KAAKA,KAAK,IAAID,YAAY,CAACE,MAAM,KAAKA,MAAM,EAAE;MAClEO,MAAM,CACJ,OAAO,EACP,+DAA+D,EAC/DR,KACF,CAAC;MACD;IACF;IACAH,qBAAqB,CAAC,YAAY;MAChCE,YAAY,GAAG;QAAEC,KAAK,EAAE,EAAE;QAAEC,MAAM,EAAE;MAAG,CAAC;MACxC,IAAI;QACFO,MAAM,CAAC,OAAO,EAAE,6CAA6C,EAAER,KAAK,CAAC;QACrE,MAAMyC,MAAM,CAACQ,YAAY,CAACjD,KAAK,CAAC;MAClC,CAAC,CAAC,OAAOkD,GAAG,EAAE;QACZ1C,MAAM,CACJ,MAAM,EACN,gEAAgE,EAChE0C,GACF,CAAC;MACH;IACF,CAAC,CAAC;IACF,MAAMC,kBAAkB,GAAGtC,UAAU,CAAC8B,GAAG,CAACC,gBAAgB;IAC1DpC,MAAM,CAAC,OAAO,EAAE,4BAA4B,EAAER,KAAK,CAAC;IACpD,MAAMyC,MAAM,CACTW,SAAS,CAACpD,KAAK,EAAE,KAAK,EAAEmD,kBAAkB,CAAC,CAC3CE,IAAI,CAAC,MAAM;MACVtD,YAAY,GAAG;QAAEC,KAAK;QAAEC;MAAO,CAAC;IAClC,CAAC,CAAC,CACDqD,KAAK,CAAEJ,GAAG,IAAK;MACd1C,MAAM,CAAC,MAAM,EAAE,mCAAmC,EAAE0C,GAAG,CAAC;IAC1D,CAAC,CAAC;EACN,CAAC;EACD,IAAIrC,UAAU,CAAC0C,MAAM,EAAE;IACrB,MAAMC,oBAAoB,GAAG/D,uBAAuB,CAAC,CAAC;IACtD,IAAI+D,oBAAoB,EAAE;MACxBA,oBAAoB,CAACC,uBAAuB,CAAC,CAAC,CAACJ,IAAI,CAAEK,eAAe,IAAK;QACvElD,MAAM,CACJ,OAAO,EACP,iEAAiE,EACjEkD,eAAe,CAAC7B,IAClB,CAAC;QACDgB,cAAc,CAACa,eAAe,CAAC7B,IAAI,CAAC;MACtC,CAAC,CAAC;MACF,MAAM8B,YAAY,GAAGH,oBAAoB,CAACI,oBAAoB,CAC3DF,eAAe,IAAK;QACnBlD,MAAM,CACJ,OAAO,EACP,8DAA8D,EAC9DkD,eAAe,CAAC7B,IAClB,CAAC;QACDgB,cAAc,CAACa,eAAe,CAAC7B,IAAI,CAAC;MACtC,CACF,CAAC;MACDa,sBAAsB,CAAC,MAAM;QAC3BlC,MAAM,CAAC,OAAO,EAAE,mCAAmC,CAAC;QACpDmD,YAAY,CAACE,MAAM,CAAC,CAAC;MACvB,CAAC,CAAC;IACJ;EACF,CAAC,MAAM;IACL,MAAM5B,sBAAsB,GAAGtC,yBAAyB,CAAC,CAAC;IAC1DsC,sBAAsB,CAAC6B,gBAAgB,CAAC,UAAU,EAAG9D,KAAK,IAAK;MAC7DQ,MAAM,CACJ,OAAO,EACP,wEAAwE,EACxER,KACF,CAAC;MACD6C,cAAc,CAAC7C,KAAK,CAAC;IACvB,CAAC,CAAC;IACF0C,sBAAsB,CAAC,MAAM;MAC3BlC,MAAM,CAAC,OAAO,EAAE,wDAAwD,CAAC;MACzEyB,sBAAsB,CAAC8B,mBAAmB,CAAC,UAAU,CAAC;IACxD,CAAC,CAAC;EACJ;AACF","ignoreList":[]}
