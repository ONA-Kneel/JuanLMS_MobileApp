{"version":3,"names":["useCall","useCallStateHooks","useEffect","useRef","StreamVideoRN","AppState","NativeModules","Platform","CallingState","getLogger","getKeepCallAliveForegroundServiceTypes","getNotifeeLibNoThrowForKeepCallAlive","notifeeLib","callToPassToForegroundService","current","undefined","setForegroundService","OS","StreamVideoReactNative","isCallAliveConfigured","then","isConfigured","logger","default","registerForegroundService","task","Promise","resolve","videoConfig","getConfig","foregroundServiceConfig","foregroundService","taskToRun","android","call","startForegroundService","call_cid","settings","getNotificationSettings","authorizationStatus","AuthorizationStatus","AUTHORIZED","notificationTexts","channelId","channel","id","createChannel","foregroundServiceTypes","requestAnimationFrame","displayNotification","title","body","smallIcon","push","asForegroundService","ongoing","colorized","pressAction","launchActivity","isSetForegroundServiceRan","useAndroidKeepCallAliveEffect","foregroundServiceStartedRef","activeCallCid","cid","useCallCallingState","callingState","isOutgoingCall","RINGING","isCreatedByMe","isCallJoined","JOINED","shouldStartForegroundService","run","notifee","displayedNotifications","getDisplayedNotifications","activeCallNotification","find","notification","stopForegroundService","cancelDisplayedNotification","currentState","sub","addEventListener","nextAppState","remove","IDLE","LEFT"],"sourceRoot":"../../../src","sources":["hooks/useAndroidKeepCallAliveEffect.ts"],"mappings":"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","ignoreList":[]}
