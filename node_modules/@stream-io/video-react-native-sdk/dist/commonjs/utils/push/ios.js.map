{"version":3,"names":["_reactNative","require","_rxSubjects","_libs","_videoClient","_pushLogoutCallback","_StreamVideoRN","lastApnToken","token","userId","processNonRingingNotificationStreamPayload","streamPayload","sender","type","cid","call_cid","logger","getLogger","pushNonRingingCallData$","next","undefined","oniOSExpoNotificationEvent","event","pushConfig","StreamVideoRN","getConfig","push","trigger","request","payload","stream","JSON","stringify","exports","oniOSNotifeeEvent","Platform","OS","detail","notifeeLib","getNotifeeLibThrowIfNotInstalledForPush","EventType","PRESS","notification","data","result","onTapNonRingingCallNotification","onPushNotificationiOSStreamVideoEvent","pushNotificationIosLib","getPushNotificationIosLib","getData","isClicked","userInteraction","finish","FetchResult","NoData","initIosNonVoipToken","client","setUnsubscribeListener","ios","pushProviderName","setDeviceToken","streamClient","_user","id","setPushLogoutCallback","removeDevice","err","push_provider_name","addDevice","then","catch","isExpo","expoNotificationsLib","getExpoNotificationsLib","getDevicePushTokenAsync","devicePushToken","subscription","addPushTokenListener","remove","addEventListener","removeEventListener"],"sourceRoot":"../../../../src","sources":["utils/push/ios.ts"],"mappings":"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","ignoreList":[]}
