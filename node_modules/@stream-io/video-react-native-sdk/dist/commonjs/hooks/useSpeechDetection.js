"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useSpeechDetection = useSpeechDetection;
var _react = require("react");
var _videoClient = require("@stream-io/video-client");
var _videoReactBindings = require("@stream-io/video-react-bindings");
/**
 * Hook that provides speech detection info using the RNSpeechDetector.
 *
 * @returns An object containing the current audio level (0 - 1) and whether sound is detected.
 */
function useSpeechDetection() {
  const [audioState, setAudioState] = (0, _react.useState)({
    isSoundDetected: false,
    audioLevel: 0
  });
  const {
    useMicrophoneState
  } = (0, _videoReactBindings.useCallStateHooks)();
  const {
    isEnabled,
    mediaStream
  } = useMicrophoneState();
  (0, _react.useEffect)(() => {
    if (!isEnabled) return;
    const detector = new _videoClient.RNSpeechDetector(mediaStream);
    const start = detector.start(state => {
      setAudioState(state);
    });
    return () => {
      start.then(stop => stop());
    };
  }, [mediaStream, isEnabled]);
  return audioState;
}
//# sourceMappingURL=useSpeechDetection.js.map