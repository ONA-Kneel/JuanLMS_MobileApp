{"version":3,"names":["_reactNative","require","_defineProperty","e","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","WebRTCModule","NativeModules","RTCRtpTransceiver","constructor","args","_args$mid","_args$currentDirectio","_peerConnectionId","peerConnectionId","_mid","mid","_direction","direction","_currentDirection","currentDirection","_stopped","Boolean","isStopped","_sender","sender","_receiver","receiver","stopped","val","includes","Error","oldDirection","transceiverSetDirection","id","catch","stop","transceiverStop","then","_setStopped","setCodecPreferences","codecs","transceiverSetCodecPreferences","exports","default"],"sources":["RTCRtpTransceiver.ts"],"sourcesContent":["import { NativeModules } from 'react-native';\n\nimport RTCRtpCodecCapability from './RTCRtpCodecCapability';\nimport RTCRtpReceiver from './RTCRtpReceiver';\nimport RTCRtpSender from './RTCRtpSender';\n\nconst { WebRTCModule } = NativeModules;\n\nexport default class RTCRtpTransceiver {\n    _peerConnectionId: number;\n    _sender: RTCRtpSender;\n    _receiver: RTCRtpReceiver;\n\n    _mid: string | null = null;\n    _direction: string;\n    _currentDirection: string;\n    _stopped: boolean;\n\n    constructor(args: {\n        peerConnectionId: number,\n        isStopped: boolean,\n        direction: string,\n        currentDirection: string,\n        mid?: string,\n        sender: RTCRtpSender,\n        receiver: RTCRtpReceiver,\n    }) {\n        this._peerConnectionId = args.peerConnectionId;\n        this._mid = args.mid ?? null;\n        this._direction = args.direction;\n        this._currentDirection = args.currentDirection ?? null;\n        this._stopped = Boolean(args.isStopped);\n        this._sender = args.sender;\n        this._receiver = args.receiver;\n    }\n\n    get mid() {\n        return this._mid;\n    }\n\n    get stopped() {\n        return this._stopped;\n    }\n\n    get direction() {\n        return this._direction;\n    }\n\n    set direction(val) {\n        if (![ 'sendonly', 'recvonly', 'sendrecv', 'inactive' ].includes(val)) {\n            throw new TypeError('Invalid direction provided');\n        }\n\n        if (this._stopped) {\n            throw new Error('Transceiver Stopped');\n        }\n\n        if (this._direction === val) {\n            return;\n        }\n\n        const oldDirection = this._direction;\n\n        WebRTCModule.transceiverSetDirection(this._peerConnectionId, this.sender.id, val)\n            .catch(() => {\n                this._direction = oldDirection;\n            });\n\n        this._direction = val;\n    }\n\n    get currentDirection() {\n        return this._currentDirection;\n    }\n\n    get sender() {\n        return this._sender;\n    }\n\n    get receiver() {\n        return this._receiver;\n    }\n\n    stop() {\n        if (this._stopped) {\n            return;\n        }\n\n        WebRTCModule.transceiverStop(this._peerConnectionId, this.sender.id)\n            .then(() => this._setStopped());\n    }\n\n    setCodecPreferences(codecs: RTCRtpCodecCapability[]) {\n        WebRTCModule.transceiverSetCodecPreferences(\n            this._peerConnectionId,\n            this.sender.id,\n            codecs\n        );\n    }\n\n    _setStopped() {\n        this._stopped = true;\n        this._direction = 'stopped';\n        this._currentDirection = 'stopped';\n        this._mid = null;\n    }\n}\n"],"mappings":"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","ignoreList":[]}